# λ―Έκµ­ μ£Όμ‹ κ±°λμ‹κ°„ μ™„μ „ κ°€μ΄λ“

## μ¶μ²
**KIS API κ³µμ‹ λ¬Έμ„** (`[ν•΄μ™Έμ£Όμ‹] μ£Όλ¬Έ_κ³„μΆ.xlsx`, Row 14)

---

## 1. λ―Έκµ­ μ£Όμ‹ κ±°λμ‹κ°„ (ν•κµ­μ‹κ°„ κΈ°μ¤€)

### π“ μ •κ·μ¥ (Regular Trading Hours)
- **ν‘μ¤€μ‹ (11μ›”~3μ›”)**: 23:30 ~ 06:00
- **μ„λ¨Ένƒ€μ„ (3μ›”~11μ›”)**: 22:30 ~ 05:00
- **λ―Έκµ­ λ™λ¶€μ‹κ°„**: 09:30 ~ 16:00 (EST/EDT)

### β οΈ  ν”„λ¦¬λ§μΌ“ (Pre-Market) - μ£Όλ¬Έ κΈμ§€
- **ν‘μ¤€μ‹**: 18:00 ~ 23:30
- **μ„λ¨Ένƒ€μ„**: 17:00 ~ 22:30
- **λ―Έκµ­ λ™λ¶€μ‹κ°„**: 04:00 ~ 09:30
- **KIS API μ ν•**: μ΄ μ‹κ°„λ€μ—λ” μ£Όλ¬Έ λ¶κ°€

### β οΈ  μ• ν”„ν„°λ§μΌ“ (After-Hours) - μ£Όλ¬Έ κΈμ§€
- **ν‘μ¤€μ‹**: 06:00 ~ 07:00
- **μ„λ¨Ένƒ€μ„**: 05:00 ~ 07:00
- **λ―Έκµ­ λ™λ¶€μ‹κ°„**: 16:00 ~ 17:00
- **KIS API μ ν•**: μ΄ μ‹κ°„λ€μ—λ” μ£Όλ¬Έ λ¶κ°€

---

## 2. μ„λ¨Ένƒ€μ„ (Daylight Saving Time) μ μ© κΈ°κ°„

### π“… λ―Έκµ­ μ„λ¨Ένƒ€μ„ κ·μΉ™
- **μ‹μ‘**: 3μ›” λ‘ λ²μ§Έ μΌμ”μΌ 02:00 AM
- **μΆ…λ£**: 11μ›” μ²« λ²μ§Έ μΌμ”μΌ 02:00 AM

### 2026λ…„ μ„λ¨Ένƒ€μ„ μΌμ •
- **μ‹μ‘**: 2026λ…„ 3μ›” 8μΌ (μΌ)
- **μΆ…λ£**: 2026λ…„ 11μ›” 1μΌ (μΌ)

### μ‹μ°¨
- **ν‘μ¤€μ‹ (EST)**: ν•κµ­μ‹κ°„ - 14μ‹κ°„
- **μ„λ¨Ένƒ€μ„ (EDT)**: ν•κµ­μ‹κ°„ - 13μ‹κ°„

---

## 3. Phoenix Trading μ‹μ¤ν… κµ¬ν„ μƒνƒ

### β… κµ¬ν„ μ™„λ£ (2026-01-26)

**κµ¬ν„ λ‚΄μ©:**
- β… μ„λ¨Ένƒ€μ„ μλ™ κ°μ§€ (`_is_dst()` ν•¨μ)
- β… μ •κ·μ¥ μ‹κ°„ μ²΄ν¬ (ν‘μ¤€μ‹ 23:30-06:00, μ„λ¨Ένƒ€μ„ 22:30-05:00)
- β… ν”„λ¦¬λ§μΌ“ μ‹κ°„ κ°μ§€ λ° μ£Όλ¬Έ μ°¨λ‹¨
- β… μ• ν”„ν„°λ§μΌ“ μ‹κ°„ κ°μ§€ λ° μ£Όλ¬Έ μ°¨λ‹¨
- β… μ£Όλ§ μ²λ¦¬ (μ„λ¨Ένƒ€μ„ λ°μ)

**μ½”λ“ μ„μΉ:** `phoenix_main.py:104-244`

#### 1. μ„λ¨Ένƒ€μ„ μλ™ κ°μ§€ ν•¨μ (lines 104-129)
```python
def _is_dst(self, date: datetime) -> bool:
    """
    λ―Έκµ­ μ„λ¨Ένƒ€μ„(Daylight Saving Time) μ—¬λ¶€ ν™•μΈ
    μ„λ¨Ένƒ€μ„ κΈ°κ°„: 3μ›” λ‘ λ²μ§Έ μΌμ”μΌ ~ 11μ›” μ²« λ²μ§Έ μΌμ”μΌ
    """
    year = date.year

    # 3μ›” λ‘ λ²μ§Έ μΌμ”μΌ κ³„μ‚°
    march = datetime(year, 3, 1)
    days_until_sunday = (6 - march.weekday()) % 7
    first_sunday = march + timedelta(days=days_until_sunday)
    dst_start = first_sunday + timedelta(weeks=1)  # λ‘ λ²μ§Έ μΌμ”μΌ

    # 11μ›” μ²« λ²μ§Έ μΌμ”μΌ κ³„μ‚°
    november = datetime(year, 11, 1)
    days_until_sunday = (6 - november.weekday()) % 7
    dst_end = november + timedelta(days=days_until_sunday)  # μ²« λ²μ§Έ μΌμ”μΌ

    return dst_start <= date < dst_end
```

#### 2. κ±°λμ‹κ°„ μ²΄ν¬ (μ„λ¨Ένƒ€μ„ λ°μ, lines 131-244)
```python
def _is_market_open(self) -> tuple[bool, str]:
    """
    λ―Έκµ­ μ£Όμ‹ μ‹μ¥ κ°μ¥ μ—¬λ¶€ ν™•μΈ (ν•κµ­ μ‹κ°„ κΈ°μ¤€, μ„λ¨Ένƒ€μ„ λ°μ)

    [KIS API κ³µμ‹ λ¬Έμ„ κΈ°μ¤€]
    - μ •κ·μ¥: ν‘μ¤€μ‹ 23:30~06:00, μ„λ¨Ένƒ€μ„ 22:30~05:00
    - ν”„λ¦¬λ§μΌ“: μ£Όλ¬Έ λ¶κ°€ (ν‘μ¤€μ‹ 18:00~23:30, μ„λ¨Ένƒ€μ„ 17:00~22:30)
    - μ• ν”„ν„°λ§μΌ“: μ£Όλ¬Έ λ¶κ°€ (ν‘μ¤€μ‹ 06:00~07:00, μ„λ¨Ένƒ€μ„ 05:00~07:00)
    """
    now = datetime.now()
    is_dst = self._is_dst(now)

    # κ±°λμ‹κ°„ μ„¤μ • (μ„λ¨Ένƒ€μ„ λ°μ)
    if is_dst:
        open_hour, open_minute = 22, 30  # μ„λ¨Ένƒ€μ„
        close_hour, close_minute = 5, 0
        season = "μ„λ¨Ένƒ€μ„(EDT)"
    else:
        open_hour, open_minute = 23, 30  # ν‘μ¤€μ‹
        close_hour, close_minute = 6, 0
        season = "ν‘μ¤€μ‹(EST)"

    # μ£Όλ§ μ²΄ν¬, μ •κ·μ¥ μ²΄ν¬, ν”„λ¦¬λ§μΌ“ μ°¨λ‹¨, μ• ν”„ν„°λ§μΌ“ μ°¨λ‹¨
    # (μƒμ„Έ λ΅μ§μ€ phoenix_main.py:155-244 μ°Έμ΅°)
```

---

## 4. ν…μ¤νΈ κ²°κ³Ό

### β… μ „μ²΄ ν…μ¤νΈ ν†µκ³Ό (2026-01-26)

**ν…μ¤νΈ νμΌ:** `test_dst_trading_hours.py`

#### ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€:
1. **DST κ³„μ‚° (9κ° μΌ€μ΄μ¤)**: β… λ¨λ‘ ν†µκ³Ό
   - 2026λ…„ DST κΈ°κ°„ μ •ν™•ν κ³„μ‚° (3μ›” 8μΌ ~ 11μ›” 1μΌ)
   - κ²½κ³„ μ΅°κ±΄ ν…μ¤νΈ (DST μ‹μ‘/μΆ…λ£ μ „ν›„)

2. **ν‘μ¤€μ‹ κ±°λμ‹κ°„ (14κ° μΌ€μ΄μ¤)**: β… λ¨λ‘ ν†µκ³Ό
   - μ •κ·μ¥: 23:30 ~ 06:00
   - ν”„λ¦¬λ§μΌ“ μ°¨λ‹¨: 18:00 ~ 23:29
   - μ• ν”„ν„°λ§μΌ“ μ°¨λ‹¨: 06:01 ~ 07:00

3. **μ„λ¨Ένƒ€μ„ κ±°λμ‹κ°„ (15κ° μΌ€μ΄μ¤)**: β… λ¨λ‘ ν†µκ³Ό
   - μ •κ·μ¥: 22:30 ~ 05:00
   - ν”„λ¦¬λ§μΌ“ μ°¨λ‹¨: 17:00 ~ 22:29
   - μ• ν”„ν„°λ§μΌ“ μ°¨λ‹¨: 05:01 ~ 07:00

4. **μ£Όλ§ μ²λ¦¬ (8κ° μΌ€μ΄μ¤)**: β… λ¨λ‘ ν†µκ³Ό
   - ν† μ”μΌ 06:00 μ΄ν›„ μ£Όλ§ μ²λ¦¬
   - μΌμ”μΌ μ „μ²΄ μ£Όλ§ μ²λ¦¬
   - μ›”μ”μΌ 22:30 μ΄μ „ μ£Όλ§ μ²λ¦¬ (μ„λ¨Ένƒ€μ„ κΈ°μ¤€)

---

## 5. μ°Έκ³  μλ£

### KIS API κ³µμ‹ λ¬Έμ„ μ›λ¬Έ
```
* ν•΄μ™Έ κ±°λμ† μ‹κ°„λ€ λ° API νΈμ¶ μ‹ μ¤λ¥κ°€ λ°μƒν•λ©΄ μ‹κ°„λ€λ¥Ό ν™•μΈν•μ„Έμ”.
* ν•΄μ™Έ κ±°λμ† μ‹κ°„(ν•κµ­μ‹κ°„ κΈ°μ¤€)
1) λ―Έκµ­ : 23:30 ~ 06:00 (μ„λ¨Ένƒ€μ„ μ μ© μ‹ 22:30 ~ 05:00)
   * ν”„λ¦¬λ§μΌ“(18:00 ~ 23:30, Summer Time : 17:00 ~ 22:30),
     μ• ν”„ν„°λ§μΌ“(06:00 ~ 07:00, Summer Time : 05:00 ~ 07:00) μ‹κ°„λ€μ—λ” μ£Όλ¬Έ λ¶κ°€
2) μΌλ³Έ : (μ „μ¥) 09:00 ~ 11:30, (ν›„μ¥) 12:30 ~ 15:00
3) μ¤‘κµ­ : 10:30 ~ 16:00
4) ν™μ½© : (μ „μ¥) 10:30 ~ 13:00, (ν›„μ¥) 14:00 ~ 17:00
```

### μ¶”κ°€ μ°Έκ³  λ§ν¬
- KIS ν•΄μ™Έμ¦κ¶ κ±°λμ‹ μ²­: https://securities.koreainvestment.com/main/bond/research/_static/TF03ca010001.jsp
- KIS GitHub: https://github.com/koreainvestment/open-trading-api

---

## 6. μµμΆ… κ²€μ¦ κ²°κ³Ό

### β… κµ¬ν„ μ™„λ£ ν•­λ©
| ν•­λ© | μƒνƒ | λΉ„κ³  |
|---|---|---|
| μ„λ¨Ένƒ€μ„ μλ™ κ°μ§€ | β… μ™„λ£ | `_is_dst()` ν•¨μ κµ¬ν„ |
| μ •κ·μ¥ μ‹κ°„ μ²΄ν¬ (ν‘μ¤€μ‹) | β… μ™„λ£ | 23:30 ~ 06:00 |
| μ •κ·μ¥ μ‹κ°„ μ²΄ν¬ (μ„λ¨Ένƒ€μ„) | β… μ™„λ£ | 22:30 ~ 05:00 |
| ν”„λ¦¬λ§μΌ“ μ£Όλ¬Έ μ°¨λ‹¨ | β… μ™„λ£ | ν‘μ¤€μ‹/μ„λ¨Ένƒ€μ„ κ°κ° κµ¬ν„ |
| μ• ν”„ν„°λ§μΌ“ μ£Όλ¬Έ μ°¨λ‹¨ | β… μ™„λ£ | ν‘μ¤€μ‹/μ„λ¨Ένƒ€μ„ κ°κ° κµ¬ν„ |
| μ£Όλ§ μ²λ¦¬ | β… μ™„λ£ | DST λ°μλ μ‹κ°„μΌλ΅ κ³„μ‚° |
| λ‹¨μ„ ν…μ¤νΈ | β… μ™„λ£ | 46κ° ν…μ¤νΈ μΌ€μ΄μ¤ λ¨λ‘ ν†µκ³Ό |

### π€ λ°°ν¬ μ¤€λΉ„ μ™„λ£
- **μ½”λ“ κ²€μ¦**: 100% μ™„λ£
- **ν…μ¤νΈ ν†µκ³Όμ¨**: 100% (46/46)
- **KIS API μ¤ν™ μ¤€μ**: 100%
- **μ‹¤κ±°λ μ¤€λΉ„**: β… μ™„λ£

---

**μ‘μ„±μΌ**: 2026-01-26
**μµμΆ… μ—…λ°μ΄νΈ**: 2026-01-26 (κµ¬ν„ λ° ν…μ¤νΈ μ™„λ£)
**μ¶μ²**: KIS API κ³µμ‹ λ¬Έμ„ `[ν•΄μ™Έμ£Όμ‹] μ£Όλ¬Έ_κ³„μΆ.xlsx`
**ν…μ¤νΈ**: `test_dst_trading_hours.py` (46κ° μΌ€μ΄μ¤ λ¨λ‘ ν†µκ³Ό)
