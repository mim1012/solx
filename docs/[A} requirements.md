## 1. 시스템 개요

- 목적: **횡보장·조정장에서 반복 수익을 노리는 자동매매**
- 대상: **국내 주식 현물**
- 방식:
    - O 증권사 API 사용 안 함
- 실행 환경: **사용자 PC 단일 사용자**
- 주문 주기: **40초 / 1분 등 사용자 설정 가능**
    - 의미: *가격 기준 변경이 아니라 “조건 재확인 주기”*

## 2. 기본 매매 구조 (핵심 로직)

### ✅ 전체 컨셉 한 줄 요약

> 고점 추적 → 눌림 매수 → 반등 매도 → 현금 복귀 → 반복
> 

## 3. 1티어 기준가 정의 (가장 중요)

### 3.1 최초 1티어 기준가

- **자동매매 ON 시점의 현재가**
- 별도 수동 입력 ❌

### 3.2 1티어 기준가 갱신 규칙

- **항상 “지금까지 관측된 최고가(고점)”**
- 가격이 새 고점을 찍으면:
    - → **1티어 기준가 = 해당 고점으로 갱신**
- 상승 중에는:
    - ❌ 매수 없음
    - ❌ 매도 없음
    - ❌ 보유 없음 (항상 현금)

## 4. 매수 로직

### 4.1 매수 트리거

- 기준: **1티어 기준가(고점) 대비 하락**
- 조건:

```
현재가 ≤1티어 기준가 × (1 -0.5%)

```

### 4.2 매수 특징

- 고점에서 **0.5% 눌릴 때만 매수**
- 매수 후에는 **주식 보유 상태**

## 5. 매도 로직

### 5.1 매도 트리거

- 기준: **매수가 대비 반등**
- 조건:

```
현재가 ≥ 매수가 × (1 +3%)

```

### 5.2 매도 방식

- ✔️ 전량 매도
- ✔️ 매도 후 **항상 현금 상태로 복귀**
- ✔️ 매도 직후 현재가는 다시 **고점 후보**

## 6. 티어 분할 구조

- 티어 수: **최대 240티어**
- 의미:
    - 한 번 매수 후 반등 실패 시
    - 다시 고점 갱신 → 하락 → 또 매수
    - 이 과정을 **누적 단계(티어)** 로 관리
- 티어 판단 방식:
    - ❌ DB/FSM 없음
    - ⭕ **보유 주식 수량을 읽어서 티어 추정**
        
        ```
        현재 보유 수량 ÷ 1티어당 수량 = 현재 티어
        
        ```
        

## 7. 240티어 도달 시 동작

- 신규 매수: ❌ 중단
- 상태:
    - 기존 보유 물량 유지
    - **240티어 매도가(+3%)만 감시**
- 반등 발생 시:
    - 해당 매도가 도달하면 매도
- 손절: **없음**

---

## 8. 손절 및 리스크 정책

- ❌ 손절 없음
- ❌ 강제 청산 없음
- ❌ 하락 추세 방어 로직 없음
- 리스크 전제:
    - **장기 하락 시 장기간 물림 가능**
    - 반등이 와야만 수익 또는 탈출 가능

---

## 9. 시간 설정(40초 / 1분)의 정확한 의미

- ❌ 시간봉 기준 매매 아님
- ❌ 시간마다 기준가 재설정 아님
- ⭕ **조건 재확인 주기 (Polling Interval)**

### 매 주기마다 수행되는 작업

1. API로 현재가 조회
2. 고점 갱신 여부 확인
3. 매수 조건 확인
4. 매도 조건 확인
5. 필요 시 주문 실행

## 10. 전략 특성 요약

### 수익이 발생하는 구간

- ✔️ 횡보장
- ✔️ 조정 후 반등
- ✔️ 변동성 있는 박스권

### 수익이 없는 구간

- ❌ 단방향 상승장
- ❌ 강한 추세 상승

